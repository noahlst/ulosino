# Stack details

ULOSINO, a community project which is designed to be defined and explicit, was built with opinionated stack features. This reference document provides an explanatory overview of the stack.

## Folder structure

### /pages

Because we're using Next.js, this is where pages (i.e. URL assigned resources) live. See below for more details.

### /public

Again, a feature of Next.js, this is where static and brand assets are stored and cached. `/public` contains:

- `/public/content`, which is a direct mirror of `/pages` where remote MDX is used.
- `/public/icons`, which contains ULOSINO brand assets, generated by the Node.js `pwa-asset-generator` package.

### /src

The source folder contains items which are presented to the user via `/pages`. It contains:

- `/src/components`, which contains React components and should be used for reusable components, with multiple DOM elements, especially on MDX pages
- `/src/data`, which contains React components which are composed by pages, often shared text like the version string.
- `/src/theme`, which contains specialised theming

The top level of `/src` contains providers which don't handle data.

## Page types

ULOSINO has three types of pages.

### Standard React pages

Pages which contain an individual export name are considered standard React pages. These pages return the TSX which the user is presented with, in accordance with standard React. This type of page is used when the full power of React and TypeScript is needed, e.g. the Dashboard (data) and Options (changing settings).

### Remote MDX pages

Pages which export an `MDXHostPage` function are considered remote MDX pages. These pages combine the performance of Next.js' `getStaticProps` function with the authoring efficiency of using MDX. To compose this type of page, MDX for the corresponding page imported from the `public/content` folder (with the same path in that folder). Because this allows us to use the `MDXProvider`, it enforces standardisation and separates written code with written content. This page type is used on text heavy pages (and where dynamic routes can't be used, e.g. at `pages/`).

### Dynamic pages

Pages for distributions, Guides, and support pages are similar to remote MDX pages but use Next's dynamic route system. The MDX for these pages is imported from `/public/content/[URL]/[name]`, templated using a universal layout, and assigned a dynamic route to `pages/[URL]/[name]` (remember that `/pages` is `/` to the user). This makes the file system cleaner and reduces duplication.

## Providers

Providers are library files. Per the dictionary definition, a provider supplies (backend processes) or presents (the user) with functionality.

ULOSINO is designed so that page content itself (excluding the Dashboard) doesn't depend on providers, but that providers enhance the experience and enforce standards throughout.

### UIProvider

`UIProvider.tsx` wraps around pages and provides the ULOSINO user interface (navigation bar, etc). It isn't applied to `app.tsx` so that mandatory pages without the layout (e.g. sign-in page) can be built if needed in the future.

### UIThemeProvider

`UIThemeProvider.ts` is the Chakra UI global theming file. It is imported on `app.tsx` and `document.tsx`.

### MDXProvider

The `MDXProvider.js` file provides Chakra UI components to Markdown style elements.

### SearchProvider

The `SearchProvider.tsx` provides search and sorting for the ULOSINO dashboard. It gets files stored in `/public/content/d`, parses metadata, and (for the 'Just In' section) sorts it by newest date.

## Other details

### Code quality

- The Prettier formatter is applied to all pages, without configuration
- React Strict Mode is enabled universally
- TypeScript is used wherever possible
- TypeScript Strict Mode is disabled (not to my preference)
- TypeScript compiles to ES2020
- Semantic versioning is used
- MIT licensing is used
